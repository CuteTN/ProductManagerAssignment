<div class="d-flex container justify-content-center px-0">
  <mat-card class="col-lg-6 col-md-9 col-sm-12 px-0 mx-0 product-editor-card">
    <div class="d-flex col justify-content-center mt-3 mb-4">
      <label class="card-title"> NEW PRODUCT </label>
    </div>
    <form [formGroup]="form" class="d-flex row justify-content-center p-2 m-0">
      <div class="row col-12">
        <mat-form-field appearance="fill" class="col">
          <mat-label>ID</mat-label>
          <input matInput [disabled]="true" placeholder="Product ID" />
          <mat-icon matSuffix>key</mat-icon>
        </mat-form-field>
      </div>

      <div class="row col-12">
        <mat-form-field appearance="fill" class="col">
          <mat-label>Name</mat-label>
          <input
            matInput
            placeholder="Enter the product name"
            formControlName="name"
          />
        </mat-form-field>

        <mat-form-field appearance="fill" class="col">
          <mat-label>Supplier</mat-label>
          <input
            type="text"
            placeholder="Select a supplier"
            aria-label="Number"
            matInput
            [matAutocomplete]="supplierAutocomplete"
            formControlName="supplier"
          />
          <mat-autocomplete
            #supplierAutocomplete="matAutocomplete"
            [displayWith]="getName"
          >
            <mat-option
              *ngFor="let supplier of filteredSuppliers$ | async"
              [value]="supplier"
            >
              {{ supplier.name }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
      </div>

      <div class="row col-12">
        <mat-form-field appearance="fill" class="col">
          <mat-label>Description</mat-label>
          <textarea
            matInput
            placeholder="Provide product description"
            maxlength="500"
            [mat-autosize]="true"
            formControlName="description"
          ></textarea>
        </mat-form-field>
      </div>

      <div class="row col-12">
        <mat-form-field appearance="fill" class="col">
          <mat-label>Release date</mat-label>
          <input
            matInput
            [matDatepicker]="releaseDatePicker"
            placeholder="Enter the product release date"
            (click)="releaseDatePicker.open()"
            readonly
            formControlName="releaseDate"
          />
          <mat-datepicker-toggle matSuffix [for]="releaseDatePicker">
          </mat-datepicker-toggle>
          <mat-datepicker #releaseDatePicker> </mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="fill" class="col">
          <mat-label>Discontinued date</mat-label>
          <input
            matInput
            [matDatepicker]="discontinuedDatePicker"
            placeholder="Enter the product discontinued date"
            (click)="discontinuedDatePicker.open()"
            readonly
            formControlName="discontinuedDate"
          />
          <mat-datepicker-toggle matSuffix [for]="discontinuedDatePicker">
          </mat-datepicker-toggle>
          <mat-datepicker #discontinuedDatePicker> </mat-datepicker>
        </mat-form-field>
      </div>

      <div class="row col-12">
        <mat-form-field appearance="fill" class="col">
          <mat-label>Price</mat-label>
          <input
            matInput
            type="number"
            min="0"
            max="1000000000"
            placeholder="Enter the product price"
            formControlName="price"
            #priceInput
          />
          <mat-icon matSuffix>{{
            +priceInput.value === 0 ? "money_off" : "attach_money"
          }}</mat-icon>
        </mat-form-field>
      </div>

      <div class="row col-12">
        <mat-form-field appearance="fill" class="col">
          <mat-label>Categories</mat-label>
          <mat-chip-list #categoriesChipList aria-label="Categories selection">
            <mat-chip
              *ngFor="let category of selectedCategories"
              [selectable]="true"
              [removable]="true"
              (removed)="handleRemoveCategory(category)"
            >
              {{ category.name }}
              <mat-icon matChipRemove *ngIf="true">cancel</mat-icon>
            </mat-chip>
            <input
              placeholder="New category..."
              #categoryInput
              [matAutocomplete]="categoriesAutoComplete"
              [matChipInputFor]="categoriesChipList"
              formControlName="categorySearchedText"
            />
          </mat-chip-list>
          <mat-autocomplete
            autoActiveFirstOption
            #categoriesAutoComplete="matAutocomplete"
            [displayWith]="getName"
            (optionSelected)="
              handleSelectCategory({
                event: $event,
                inputControl: categoryInput
              })
            "
          >
            <mat-option
              *ngFor="let category of filteredCategories$ | async"
              [value]="category"
            >
              {{ category.name }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
      </div>

      <div class="row col-12" formGroupName="productDetail">
        <mat-form-field appearance="fill" class="col">
          <mat-label>Details</mat-label>
          <textarea
            matInput
            placeholder="Enter the product details"
            maxlength="500"
            [mat-autosize]="true"
            formControlName="details"
          ></textarea>
        </mat-form-field>
      </div>
    </form>

    <div class="d-flex row justify-content-center p-2 m-0">
      <div class="d-flex col-12 justify-content-center">
        <label class="rating-label">Rating</label>
      </div>

      <select-star-rating
        [max-stars]="5"
        class="row col-12"
        (on-value-change)="handleRatingChange($event)"
      ></select-star-rating>
    </div>
  </mat-card>
  <!-- <pre>{{ getProduct() | json }}</pre> -->
</div>
